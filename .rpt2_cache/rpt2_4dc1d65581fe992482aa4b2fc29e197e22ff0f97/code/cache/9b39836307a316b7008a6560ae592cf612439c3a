{
  "code": "import { PlayerDataManager } from \"../common/GameDataManager\";\r\nvar ConfigManager = (function () {\r\n    function ConfigManager() {\r\n        this.mapDialogBoxIndex = {};\r\n    }\r\n    ConfigManager.getInstance = function () {\r\n        if (!ConfigManager.instance) {\r\n            ConfigManager.instance = new ConfigManager();\r\n        }\r\n        return ConfigManager.instance;\r\n    };\r\n    ConfigManager.prototype.initConfigInfo = function () {\r\n        var self = ConfigManager.instance;\r\n        var subF = \"\";\r\n        var preF = \"resource/assets/config/\";\r\n        if (DeviceUtil.isMiniGame()) {\r\n            subF += \"?v=\" + Math.random();\r\n        }\r\n        return new Promise(function (resolve) {\r\n            var count = 0;\r\n            var len = 5;\r\n            var loadConfigSucc = function () {\r\n                count++;\r\n                if (count >= len) {\r\n                    resolve();\r\n                }\r\n            };\r\n            Laya.loader.load(preF + 'GameConfig.json' + subF, new Laya.Handler(self, function (json) {\r\n                if (typeof (json) == \"string\") {\r\n                    self.aryGameConfig = JSON.parse(json);\r\n                }\r\n                else {\r\n                    self.aryGameConfig = json;\r\n                }\r\n                loadConfigSucc();\r\n            }));\r\n            Laya.loader.load(preF + 'SignConfig.json' + subF, new Laya.Handler(self, function (json) {\r\n                if (typeof (json) == \"string\") {\r\n                    self.arySignData = JSON.parse(json);\r\n                }\r\n                else {\r\n                    self.arySignData = json;\r\n                }\r\n                loadConfigSucc();\r\n            }));\r\n            Laya.loader.load(preF + 'LevelPsInfo.json' + subF, new Laya.Handler(self, function (json) {\r\n                if (typeof (json) == \"string\") {\r\n                    self.aryLevelPsData = JSON.parse(json);\r\n                }\r\n                else {\r\n                    self.aryLevelPsData = json;\r\n                }\r\n                loadConfigSucc();\r\n            }));\r\n            Laya.loader.load(preF + 'DialogBox.json' + subF, new Laya.Handler(self, function (json) {\r\n                if (typeof (json) == \"string\") {\r\n                    self.aryDialogBoxIndex = JSON.parse(json);\r\n                }\r\n                else {\r\n                    self.aryDialogBoxIndex = json;\r\n                }\r\n                var nLen = self.aryDialogBoxIndex.length;\r\n                for (var i = 0; i < nLen; ++i) {\r\n                    self.mapDialogBoxIndex[self.aryDialogBoxIndex[i].id] = self.aryDialogBoxIndex[i];\r\n                }\r\n                loadConfigSucc();\r\n            }));\r\n            Laya.loader.load(preF + 'InviteConfig.json' + subF, new Laya.Handler(self, function (json) {\r\n                if (typeof (json) == \"string\") {\r\n                    self.aryInviteConfigIndex = JSON.parse(json);\r\n                }\r\n                else {\r\n                    self.aryInviteConfigIndex = json;\r\n                }\r\n                loadConfigSucc();\r\n            }));\r\n        });\r\n    };\r\n    ConfigManager.prototype.getInviteConfigInfo = function () {\r\n        return ConfigManager.instance.aryInviteConfigIndex;\r\n    };\r\n    ConfigManager.prototype.getSignDataAll = function () {\r\n        return ConfigManager.instance.arySignData;\r\n    };\r\n    ConfigManager.prototype.getSignDataBySignID = function (nIndex) {\r\n        if (nIndex < 0 || nIndex >= ConfigManager.instance.arySignData.length) {\r\n            return null;\r\n        }\r\n        return ConfigManager.instance.arySignData[nIndex];\r\n    };\r\n    ConfigManager.prototype.getGameConfigDataByID = function (nID) {\r\n        if (nID > ConfigManager.instance.aryGameConfig.length || nID <= 0) {\r\n            return null;\r\n        }\r\n        var nRealID = nID - 1;\r\n        return ConfigManager.instance.aryGameConfig[nRealID];\r\n    };\r\n    ConfigManager.prototype.getTreasureByCurLevel = function () {\r\n        var nRealIndex = PlayerDataManager.getInstance().getCurLevel();\r\n        if (nRealIndex < 0 || ConfigManager.instance.aryLevelPsData.length < 0) {\r\n            return 0;\r\n        }\r\n        nRealIndex = nRealIndex >= ConfigManager.instance.aryLevelPsData.length ? ConfigManager.instance.aryLevelPsData.length - 1 : nRealIndex;\r\n        return ConfigManager.instance.aryLevelPsData[nRealIndex].nPs;\r\n    };\r\n    ConfigManager.prototype.getDialogInfo = function (nDialogID) {\r\n        return ConfigManager.instance.mapDialogBoxIndex[nDialogID];\r\n    };\r\n    return ConfigManager;\r\n}());\r\nexport default ConfigManager;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ConfigDefine.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameDataManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/loading/GamePreLoadingView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/manager/GameManager.ts"
  ]
}
