{
  "code": "import CommonView from \"../views/game/CommonView\";\r\nimport GameStateManager from \"./GameStateManager\";\r\nimport { PlayerDataManager } from \"../common/GameDataManager\";\r\nimport { EnterGameType } from \"./CommonDefine\";\r\nimport { LevelManager } from \"../manager/LevelManager\";\r\nimport GameBufferLoading from \"../loading/GameBufferLoading\";\r\nimport { MiniManeger } from \"../minigame/MiniManeger\";\r\nimport PlatformDY from \"../../PlatformDY\";\r\nimport { GameData } from \"../common/GameData\";\r\nimport MoreGameViewTemp from \"../views/game/wecat/MoreGameViewTemp\";\r\nimport MoreGameRandomGameBox713Temp from \"../views/game/wecat/MoreGameRandomGameBox713Temp\";\r\nimport WeCatMoreGameView from \"../views/game/wecat/WeCatMoreGameView\";\r\nimport MoreGameRandomGameBox713 from \"../views/game/wecat/MoreGameRandomGameBox713\";\r\nimport AddPsView from \"../views/game/AddPsView\";\r\nimport ShouMoreGameInView from \"../views/game/wecat/ShouMoreGameInView\";\r\nvar ViewChangeManager = (function () {\r\n    function ViewChangeManager() {\r\n        this.image_exit = null;\r\n    }\r\n    ViewChangeManager.getInstance = function () {\r\n        if (!this.instance) {\r\n            this.instance = new ViewChangeManager();\r\n        }\r\n        return this.instance;\r\n    };\r\n    Object.defineProperty(ViewChangeManager.prototype, \"CommonView\", {\r\n        get: function () {\r\n            if (!this.pCommonView) {\r\n                this.pCommonView = new CommonView();\r\n                this.pCommonView.x = 0;\r\n                this.pCommonView.y = 0;\r\n            }\r\n            return this.pCommonView;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(ViewChangeManager.prototype, \"CurLevelBase\", {\r\n        get: function () {\r\n            return this.pCurLevelBase;\r\n        },\r\n        set: function (pCurLevelBase) {\r\n            this.pCurLevelBase = pCurLevelBase;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    ViewChangeManager.prototype.showCommonView = function () {\r\n        Laya.stage.addChild(this.CommonView);\r\n    };\r\n    ViewChangeManager.prototype.gotoLevel = function (nCurLevel) {\r\n        PlayerDataManager.getInstance().setCurLevel(nCurLevel - 1);\r\n        GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_ChooseLevel;\r\n        LevelManager.getInstance().createLevelScene(nCurLevel);\r\n    };\r\n    ViewChangeManager.prototype.goToNextLevel = function (bFlag) {\r\n        if (bFlag === void 0) { bFlag = false; }\r\n        MiniManeger.instance.StopVideo();\r\n        this.pCurLevelBase.closeGameView();\r\n        GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_Next;\r\n        PlayerDataManager.getInstance().addLevel();\r\n        var nLevel = PlayerDataManager.getInstance().getCurLevelToChallenge();\r\n        LevelManager.getInstance().createLevelScene(nLevel);\r\n    };\r\n    ViewChangeManager.prototype.restartGame = function (bAll) {\r\n        if (bAll === void 0) { bAll = true; }\r\n        GameStateManager.getInstance().levelState = EnterGameType.enum_EnterGameType_ReStart;\r\n        this.pCurLevelBase.restartGame(bAll);\r\n    };\r\n    ViewChangeManager.prototype.rigestBufferLoadingView = function () {\r\n        BufferLoadingManger.getInstance().registerOneBuffer(\"gamebuffer\", new GameBufferLoading());\r\n    };\r\n    ViewChangeManager.prototype.showBufferLoadingView = function () {\r\n        BufferLoadingManger.getInstance().showBuffer(\"gamebuffer\");\r\n    };\r\n    ViewChangeManager.prototype.hideBufferLoadingView = function () {\r\n        BufferLoadingManger.getInstance().hiddBuffer(\"gamebuffer\");\r\n    };\r\n    ViewChangeManager.prototype.startGame = function () {\r\n        if (!BaseConst.infos.gameInfo.isDY) {\r\n            return;\r\n        }\r\n        if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())\r\n            return;\r\n        PlatformDY.startGame();\r\n    };\r\n    ViewChangeManager.prototype.endGame = function () {\r\n        if (!BaseConst.infos.gameInfo.isDY) {\r\n            return;\r\n        }\r\n        if (!DeviceUtil.isWXMiniGame() && !DeviceUtil.isQQMiniGame() && !DeviceUtil.isTTMiniGame())\r\n            return;\r\n        PlatformDY.endGame({ id: PlatformDY.nGameID, level: PlayerDataManager.getInstance().getCurLevelToChallenge() });\r\n    };\r\n    ViewChangeManager.prototype.showImageExit = function () {\r\n        if (!DeviceUtil.isWXMiniGame()) {\r\n            return;\r\n        }\r\n        if (PlayerDataManager.getInstance().stOperData0807.bSpecial == false && BaseConst.infos.gameInfo.bwrite == 1) {\r\n            console.log(\"GameDataMgr.getInstance().enterGameInfo\", GameData.getInstance().enterGameInfo);\r\n            if (GameData.getInstance().enterGameInfo.enterGameInfo == {}) {\r\n                return;\r\n            }\r\n            if (!GameData.getInstance().enterGameInfo.referrerInfo.appId) {\r\n                return;\r\n            }\r\n            if (\"wxcff7381e631cf54e\" == GameData.getInstance().enterGameInfo.referrerInfo.appId) {\r\n                return;\r\n            }\r\n        }\r\n        PlayerDataManager.getInstance().stOperData0807.bSpecial = true;\r\n        if (this.image_exit) {\r\n            return;\r\n        }\r\n        this.image_exit = new Laya.Image();\r\n        this.image_exit.skin = \"resource/assets/img/wecat/button.png\";\r\n        this.image_exit.right = 23;\r\n        this.image_exit.top = 220;\r\n        Laya.stage.addChild(this.image_exit);\r\n        this.image_exit.on(Laya.Event.CLICK, this, this.onImageExit);\r\n        PlayerDataManager.getInstance().SaveData();\r\n    };\r\n    ViewChangeManager.prototype.onImageExit = function () {\r\n        if (PlayerDataManager.getInstance().checkIsSpecial() && BaseConst.infos.gameInfo.MoreGameView == 1) {\r\n            ViewManager.getInstance().showView(MoreGameViewTemp);\r\n        }\r\n        else {\r\n            MoreGameRandomGameBox713Temp.bSpecial = true;\r\n            ViewManager.getInstance().showView(MoreGameRandomGameBox713Temp);\r\n        }\r\n    };\r\n    ViewChangeManager.prototype.showImageExitTemp = function () {\r\n        if (this.image_exit) {\r\n            this.image_exit.visible = true;\r\n        }\r\n    };\r\n    ViewChangeManager.prototype.hideImageExitTemp = function () {\r\n        if (this.image_exit) {\r\n            this.image_exit.visible = false;\r\n        }\r\n    };\r\n    ViewChangeManager.prototype.restartEnterGameHome = function () {\r\n        if (!DeviceUtil.isWXMiniGame()) {\r\n            return;\r\n        }\r\n        if (PlayerDataManager.getInstance().bIsNewPlayer) {\r\n            PlayerDataManager.bGlobEnterGame = false;\r\n            return;\r\n        }\r\n        if (BaseConst.infos.gameInfo.openPsAward == 0) {\r\n            PlayerDataManager.bGlobEnterGame = false;\r\n            return;\r\n        }\r\n        PlayerDataManager.bGlobEnterGame = true;\r\n        WeCatMoreGameView.nEnterCount = 0;\r\n        ViewManager.getInstance().showView(MoreGameRandomGameBox713);\r\n        this.pCommonView.visible = false;\r\n    };\r\n    ViewChangeManager.prototype.onPowerNotEnough = function () {\r\n        TipsManager.getInstance().showDefaultTips(\"体力不足\");\r\n        ViewChangeManager.getInstance().showBufferLoadingView();\r\n        ResUtil.getIntance().loadGroups([\"adsp\"], function () {\r\n            ViewManager.getInstance().showView(AddPsView);\r\n            ViewChangeManager.getInstance().hideBufferLoadingView();\r\n        });\r\n    };\r\n    ViewChangeManager.prototype.showMoreGameinView = function (bAni) {\r\n        if (bAni === void 0) { bAni = true; }\r\n        if (!this.pShouMoreGameInView) {\r\n            this.pShouMoreGameInView = new ShouMoreGameInView();\r\n        }\r\n        else {\r\n            this.pShouMoreGameInView.refreshWeCatMoreGame();\r\n        }\r\n        this.pShouMoreGameInView.ani = bAni;\r\n        return this.pShouMoreGameInView;\r\n    };\r\n    ViewChangeManager.bGameOpen = false;\r\n    return ViewChangeManager;\r\n}());\r\nexport default ViewChangeManager;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelBase.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/CommonView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/GameStateManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameDataManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/CommonDefine.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/manager/LevelManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/loading/GameBufferLoading.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/PlatformDY.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameData.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/MoreGameViewTemp.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/MoreGameRandomGameBox713Temp.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/WeCatMoreGameView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/MoreGameRandomGameBox713.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/AddPsView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/ShouMoreGameInView.ts"
  ]
}
