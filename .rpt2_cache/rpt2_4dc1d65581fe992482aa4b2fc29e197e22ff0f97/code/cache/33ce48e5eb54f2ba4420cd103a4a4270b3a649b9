{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport ViewChangeMgr from \"../../../games/ViewChangeManager\";\r\nimport MoreGameItemView from \"./MoreGameItemView\";\r\nimport PlatformDY from \"../../../../PlatformDY\";\r\nimport { MiniManeger } from \"../../../minigame/MiniManeger\";\r\nimport { GameData } from \"../../../common/GameData\";\r\nvar MoreGameViewTemp = (function (_super) {\r\n    tslib_1.__extends(MoreGameViewTemp, _super);\r\n    function MoreGameViewTemp() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"MoreGameViewTemp\";\r\n        _this.ITEM_H = 200;\r\n        _this.isAuto = true;\r\n        _this.dataArr = [{ t: 0 }, { t: 1 }, { t: 2 }, { t: 3 }];\r\n        _this.speed = 2;\r\n        _this.dir = -1;\r\n        _this.skin = \"game/uiView/wecat/MoreGameView.json\";\r\n        return _this;\r\n    }\r\n    MoreGameViewTemp.prototype.createChildren = function () {\r\n        _super.prototype.createChildren.call(this);\r\n    };\r\n    MoreGameViewTemp.prototype.childrenCreated = function () {\r\n        _super.prototype.childrenCreated.call(this);\r\n    };\r\n    MoreGameViewTemp.prototype.onAddStage = function () {\r\n        this.initView();\r\n        this.addEvent();\r\n        MiniManeger.instance.hideBanner();\r\n        MiniManeger.instance.bFlagSpecialView = false;\r\n        ViewChangeMgr.getInstance().hideImageExitTemp();\r\n    };\r\n    MoreGameViewTemp.prototype.onRemoved = function () {\r\n        this.removeEvent();\r\n        this.stPanel.removeChildren();\r\n        Laya.timer.clearAll(this);\r\n        ViewChangeMgr.getInstance().showImageExitTemp();\r\n    };\r\n    MoreGameViewTemp.prototype.addEvent = function () {\r\n        this.stPanel.on(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        this.stPanel.on(Laya.Event.MOUSE_MOVE, this, this.mouseMove);\r\n        this.stPanel.on(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        Laya.stage.on(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        this.image_back.on(Laya.Event.CLICK, this, this.onBack);\r\n    };\r\n    MoreGameViewTemp.prototype.removeEvent = function () {\r\n        this.stPanel.off(Laya.Event.MOUSE_DOWN, this, this.mouseDown);\r\n        this.stPanel.off(Laya.Event.MOUSE_MOVE, this, this.mouseMove);\r\n        this.stPanel.off(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        Laya.stage.off(Laya.Event.MOUSE_UP, this, this.mouseUp);\r\n        this.image_back.off(Laya.Event.CLICK, this, this.onBack);\r\n    };\r\n    MoreGameViewTemp.prototype.onBack = function () {\r\n        this.removeSelf();\r\n        MiniManeger.instance.bFlagSpecialView = true;\r\n    };\r\n    MoreGameViewTemp.prototype.mouseDown = function (e) {\r\n        this.isAuto = false;\r\n        this.stx = e.stageX;\r\n        this.sty = e.stageY;\r\n    };\r\n    MoreGameViewTemp.prototype.mouseMove = function (e) {\r\n        var dy = e.stageY - this.sty;\r\n        for (var i = 0; i < this.stPanel.numChildren; i++) {\r\n            var item = this.stPanel.getChildAt(i);\r\n            item.y += dy;\r\n        }\r\n        this.sty = e.stageY;\r\n        this.dir = dy > 0 ? 1 : -1;\r\n        this.refresh();\r\n    };\r\n    MoreGameViewTemp.prototype.mouseUp = function (e) {\r\n        this.isAuto = true;\r\n        this.dir = -1;\r\n    };\r\n    MoreGameViewTemp.prototype.initView = function () {\r\n        Laya.timer.frameLoop(1, this, this.updata);\r\n        var canuseHeight = Laya.stage.height - 280;\r\n        this.maxCount = Math.ceil(canuseHeight / this.ITEM_H);\r\n        this.dataArr = GameData.getInstance().weCatMiniIconsInfo;\r\n        console.log(GameData.getInstance().weCatMiniIconsInfo);\r\n        var didnex = 0;\r\n        for (var i = 0; i < this.maxCount + 1; i++) {\r\n            var item = new MoreGameItemView();\r\n            item.index = didnex;\r\n            item.setData(this.dataArr[item.index]);\r\n            didnex++;\r\n            if (didnex >= this.dataArr.length) {\r\n                didnex = 0;\r\n            }\r\n            item.y = i * this.ITEM_H;\r\n            this.stPanel.addChild(item);\r\n        }\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            PlatformDY.refreshGameList();\r\n        }\r\n    };\r\n    MoreGameViewTemp.prototype.getUpIndexforCurIndex = function (index) {\r\n        if (index >= this.dataArr.length || index < 0)\r\n            return 0;\r\n        return index - 1 >= 0 ? index - 1 : this.dataArr.length - 1;\r\n    };\r\n    MoreGameViewTemp.prototype.getDownIndexforCurIndex = function (index) {\r\n        if (index >= this.dataArr.length || index < 0)\r\n            return 0;\r\n        return index + 1 < this.dataArr.length ? index + 1 : 0;\r\n    };\r\n    MoreGameViewTemp.prototype.updata = function (dt) {\r\n        if (!this.isAuto)\r\n            return;\r\n        for (var i = 0; i < this.stPanel.numChildren; i++) {\r\n            var item = this.stPanel.getChildAt(i);\r\n            item.y += this.speed * this.dir;\r\n        }\r\n        this.refresh();\r\n    };\r\n    MoreGameViewTemp.prototype.refresh = function () {\r\n        var startItem;\r\n        var lastItem;\r\n        startItem = this.stPanel.getChildAt(0);\r\n        lastItem = this.stPanel.getChildAt(this.maxCount);\r\n        if (this.dir == -1) {\r\n            if (startItem.y < -this.ITEM_H) {\r\n                startItem.y = lastItem.y + lastItem.height;\r\n                startItem.zOrder = lastItem.zOrder + 1;\r\n                startItem.index = this.getDownIndexforCurIndex(lastItem.index);\r\n                startItem.refreshData(this.dataArr[startItem.index]);\r\n                console.log('idnex-=======>', startItem.index);\r\n            }\r\n        }\r\n        else {\r\n            if (lastItem.y > this.maxCount * this.ITEM_H) {\r\n                lastItem.y = startItem.y - startItem.height;\r\n                lastItem.zOrder = startItem.zOrder - 1;\r\n                lastItem.index = this.getUpIndexforCurIndex(startItem.index);\r\n                lastItem.refreshData(this.dataArr[lastItem.index]);\r\n            }\r\n        }\r\n    };\r\n    return MoreGameViewTemp;\r\n}(BaseSceneUISkinPopView));\r\nexport default MoreGameViewTemp;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ViewChangeManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/MoreGameItemView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/PlatformDY.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameData.ts"
  ]
}
