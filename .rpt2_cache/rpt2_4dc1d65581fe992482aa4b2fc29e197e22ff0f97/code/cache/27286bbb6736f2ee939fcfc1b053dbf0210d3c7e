{
  "code": "import { GameData } from \"../common/GameData\";\r\nimport { LotterySelScene } from \"../views/game/lottery/LotterySelScene\";\r\nimport { MiniManeger } from \"../minigame/MiniManeger\";\r\nimport PlatformDY from \"../../PlatformDY\";\r\nimport MoreGameRandomGameBox713 from \"../views/game/wecat/MoreGameRandomGameBox713\";\r\nvar GameManager = (function () {\r\n    function GameManager() {\r\n        this.isMiniGame = false;\r\n        this.curLevel = 0;\r\n    }\r\n    Object.defineProperty(GameManager, \"instance\", {\r\n        get: function () {\r\n            if (this.ins == null) {\r\n                this.ins = new GameManager();\r\n            }\r\n            return this.ins;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    GameManager.prototype.openLevelVideo = function (success) {\r\n        if (DeviceUtil.isQQMiniGame()) {\r\n            var nCul = this.curLevel;\r\n            if (GameData.getInstance().gameQQInfo.showLevelOverViewoOpen.indexOf(nCul) > -1) {\r\n                MiniManeger.instance.playViderAd({\r\n                    successFun: function () {\r\n                        success && success();\r\n                    }, failFun: function () {\r\n                        success && success();\r\n                    }, errorFun: function () {\r\n                        success && success();\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                success && success();\r\n            }\r\n        }\r\n        else {\r\n            success && success();\r\n        }\r\n    };\r\n    GameManager.prototype.selAddLottery = function (box_content) {\r\n        var self = this;\r\n        if (DeviceUtil.isQQMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1) {\r\n            MiniManeger.instance.showBoxAd(function () {\r\n                self.addLotteryScene(box_content);\r\n            });\r\n        }\r\n        else if ((DeviceUtil.isTTMiniGame() && BaseConst.infos.gameInfo.openPsAward == 1)) {\r\n            self.addLotteryScene(box_content);\r\n        }\r\n    };\r\n    GameManager.prototype.addLotteryScene = function (box_content) {\r\n        var self = this;\r\n        if (self.selLotteryScene == null) {\r\n            self.selLotteryScene = new LotterySelScene(null);\r\n        }\r\n        else {\r\n            self.selLotteryScene.initView();\r\n        }\r\n        box_content.visible = true;\r\n        box_content.addChild(self.selLotteryScene);\r\n    };\r\n    GameManager.prototype.parseShopTimeShow = function (time, en) {\r\n        var min = time / 60;\r\n        var hour = min / 60;\r\n        var day = hour / 24;\r\n        var str = '';\r\n        if (day >= 1) {\r\n            str = day.toFixed(2) + '天';\r\n        }\r\n        else if (hour >= 1) {\r\n            str = hour.toFixed(2) + '小时';\r\n        }\r\n        else {\r\n            str = min.toFixed(2) + '分钟';\r\n        }\r\n        if (en) {\r\n            str = str.replace(\"天\", 'day');\r\n            str = str.replace(\"小时\", 'hour');\r\n            str = str.replace(\"分钟\", 'min');\r\n        }\r\n        return str;\r\n    };\r\n    GameManager.prototype.loadCongigs = function (url) {\r\n        var _this = this;\r\n        return new Promise(function (resolve) {\r\n            var jsonUrl = url;\r\n            Laya.loader.load(jsonUrl, Laya.Handler.create(_this, function (res) {\r\n                if (typeof (res) == \"string\") {\r\n                    res = JSON.parse(res);\r\n                }\r\n                resolve(Utils.copy(res));\r\n            }));\r\n        });\r\n    };\r\n    GameManager.prototype.goToDuyou = function (_nIndex) {\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            PlatformDY.clickGame(GameData.getInstance().weCatMiniIconsInfo[_nIndex].ad_id);\r\n        }\r\n        var self = this;\r\n        var objData = {\r\n            appId: GameData.getInstance().weCatMiniIconsInfo[_nIndex].ad_appid,\r\n            path: GameData.getInstance().weCatMiniIconsInfo[_nIndex].url,\r\n            success: function () {\r\n                console.log(\"navigateToMiniProgram success!\");\r\n                if (BaseConst.infos.gameInfo.isDY) {\r\n                    console.log(\"self.nIndex = \", _nIndex);\r\n                    PlatformDY.toGame(GameData.getInstance().weCatMiniIconsInfo[_nIndex].ad_id);\r\n                }\r\n            },\r\n            fail: function (e) {\r\n                console.log(\"navigateToMiniProgram fail e =\", e);\r\n                if (DeviceUtil.isWXMiniGame()) {\r\n                    ViewManager.getInstance().showView(MoreGameRandomGameBox713);\r\n                }\r\n            }\r\n        };\r\n        platform.navigateToMiniProgram(objData);\r\n    };\r\n    return GameManager;\r\n}());\r\nexport { GameManager };\r\nwindow['GameManager'] = GameManager;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameData.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/lottery/LotterySelScene.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/PlatformDY.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/MoreGameRandomGameBox713.ts"
  ]
}
