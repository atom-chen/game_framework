{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport WeCatMoreGameItemTwo from \"./WeCatMoreGameItemTwo\";\r\nimport PlatformDY from \"../../../../PlatformDY\";\r\nimport { GameData } from \"../../../common/GameData\";\r\nimport { PlayerDataManager } from \"../../../common/GameDataManager\";\r\nimport ViewChangeManager from \"../../../games/ViewChangeManager\";\r\nimport { MiniManeger } from \"../../../minigame/MiniManeger\";\r\nimport SuccessfulEntryOneView from \"../SuccessfulEntryOneView\";\r\nvar WeCatMoreGameView = (function (_super) {\r\n    tslib_1.__extends(WeCatMoreGameView, _super);\r\n    function WeCatMoreGameView() {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"WeCatMoreGameView\";\r\n        _this.nStartY = 0;\r\n        _this.bWeCatShow = false;\r\n        _this.skin = \"game/uiView/WeCatMoreGameView.json\";\r\n        return _this;\r\n    }\r\n    WeCatMoreGameView.prototype.onAddStage = function () {\r\n        _super.prototype.onAddStage.call(this);\r\n        this.addEvent();\r\n        this.initView();\r\n        this.viewAniIn();\r\n    };\r\n    WeCatMoreGameView.prototype.onRemoved = function () {\r\n        _super.prototype.onRemoved.call(this);\r\n        this.removeEvent();\r\n    };\r\n    WeCatMoreGameView.prototype.initPanel = function () {\r\n    };\r\n    WeCatMoreGameView.prototype.initView = function () {\r\n        var nXStart = 0;\r\n        var nYStart = 0;\r\n        var nCount = 3;\r\n        var aryInfo = [];\r\n        aryInfo = this.getRandomIndex(12);\r\n        this.moreGamePanel.removeChildren();\r\n        this.moreGamePanel.y = 0;\r\n        for (var i = 0; i < aryInfo.length; ++i) {\r\n            var pWeCatMoreGameItemOne = this.moreGamePanel.getChildAt(i);\r\n            if (pWeCatMoreGameItemOne) {\r\n                pWeCatMoreGameItemOne.setData(aryInfo[i]);\r\n            }\r\n            else {\r\n                pWeCatMoreGameItemOne = new WeCatMoreGameItemTwo(aryInfo[i]);\r\n                var nAddX = Math.floor(i % nCount);\r\n                var nYAdd = Math.floor(i / nCount);\r\n                pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 15 * nAddX;\r\n                pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;\r\n                this.moreGamePanel.addChild(pWeCatMoreGameItemOne);\r\n                this.moreGamePanel.height = pWeCatMoreGameItemOne.y + pWeCatMoreGameItemOne.height + 10;\r\n            }\r\n        }\r\n        this.moreGamePanel2.y = this.moreGamePanel.height;\r\n        this.moreGamePanel2.removeChildren();\r\n        for (var i = 0; i < aryInfo.length; ++i) {\r\n            var pWeCatMoreGameItemOne = this.moreGamePanel2.getChildAt(i);\r\n            if (pWeCatMoreGameItemOne) {\r\n                pWeCatMoreGameItemOne.setData(aryInfo[i]);\r\n            }\r\n            else {\r\n                pWeCatMoreGameItemOne = new WeCatMoreGameItemTwo(aryInfo[i]);\r\n                var nAddX = Math.floor(i % nCount);\r\n                var nYAdd = Math.floor(i / nCount);\r\n                pWeCatMoreGameItemOne.x = nXStart + pWeCatMoreGameItemOne.width * nAddX + 15 * nAddX;\r\n                pWeCatMoreGameItemOne.y = nYStart + pWeCatMoreGameItemOne.height * nYAdd + 10 * nYAdd;\r\n                this.moreGamePanel2.addChild(pWeCatMoreGameItemOne);\r\n                this.moreGamePanel2.height = pWeCatMoreGameItemOne.y + pWeCatMoreGameItemOne.height + 10;\r\n            }\r\n        }\r\n        if (BaseConst.infos.gameInfo.isDY) {\r\n            PlatformDY.refreshGameList();\r\n        }\r\n        Laya.timer.frameLoop(1, this, this.onMove);\r\n    };\r\n    WeCatMoreGameView.prototype.onMove = function () {\r\n        var nHight = this.moreGamePanel.height;\r\n        this.moreGamePanel2.y -= 1.5;\r\n        this.moreGamePanel.y -= 1.5;\r\n        if (this.moreGamePanel.y <= -nHight) {\r\n            this.moreGamePanel.y = this.moreGamePanel2.y + nHight;\r\n        }\r\n        if (this.moreGamePanel2.y <= -nHight) {\r\n            this.moreGamePanel2.y = this.moreGamePanel.y + nHight;\r\n        }\r\n    };\r\n    WeCatMoreGameView.prototype.getRandomIndex = function (nMax) {\r\n        if (GameData.getInstance().weCatMiniIconsInfo.length - 1 < 0) {\r\n            return [];\r\n        }\r\n        var nRandom = Utils.random(0, GameData.getInstance().weCatMiniIconsInfo.length - 1);\r\n        var nCount = GameData.getInstance().weCatMiniIconsInfo.length % 3;\r\n        if (nCount > 0) {\r\n            nCount = 3 - nCount;\r\n        }\r\n        nCount = GameData.getInstance().weCatMiniIconsInfo.length + nCount;\r\n        if (nCount <= nMax) {\r\n            nCount = nMax;\r\n        }\r\n        var aryInfo = [];\r\n        for (var i = 0; i < nCount; ++i) {\r\n            aryInfo.push(nRandom);\r\n            nRandom += 1;\r\n            if (nRandom >= GameData.getInstance().weCatMiniIconsInfo.length) {\r\n                nRandom = 0;\r\n            }\r\n        }\r\n        return aryInfo;\r\n    };\r\n    WeCatMoreGameView.prototype.addEvent = function () {\r\n        this.imageBtWeCat.on(Laya.Event.CLICK, this, this.viewAniOut);\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_DOWN, this, this.mousedown);\r\n    };\r\n    WeCatMoreGameView.prototype.removeEvent = function () {\r\n        this.imageBtWeCat.off(Laya.Event.CLICK, this, this.viewAniOut);\r\n    };\r\n    WeCatMoreGameView.prototype.mousedown = function (evt) {\r\n        this.nStartY = evt.currentTarget.mouseY;\r\n        var self = this;\r\n        function mouseMove(evt1) {\r\n            var nYTemp = self.nStartY - evt1.currentTarget.mouseY;\r\n            self.moreGamePanel.y -= nYTemp;\r\n            self.moreGamePanel2.y -= nYTemp;\r\n            self.nStartY = evt1.currentTarget.mouseY;\r\n            if (self.moreGamePanel.y >= 0 && self.moreGamePanel2.y >= 0) {\r\n                self.moreGamePanel.y = 0;\r\n                self.moreGamePanel2.y = self.moreGamePanel.height;\r\n            }\r\n        }\r\n        function mouseUp(evt1) {\r\n            this.panel_gamelist.off(Laya.Event.MOUSE_MOVE, this, mouseMove);\r\n            this.panel_gamelist.off(Laya.Event.MOUSE_UP, this, mouseUp);\r\n        }\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_MOVE, this, mouseMove);\r\n        this.panel_gamelist.on(Laya.Event.MOUSE_UP, this, mouseUp);\r\n    };\r\n    WeCatMoreGameView.prototype.weCatViewOper = function () {\r\n        var _this = this;\r\n        this.bWeCatShow = !this.bWeCatShow;\r\n        this.imageBtWeCat.off(Laya.Event.CLICK, this, this.weCatViewOper);\r\n        if (this.bWeCatShow) {\r\n            Laya.Tween.to(this.boxWeCatMoreGame, { x: -713 }, 1000, null, Laya.Handler.create(this, function (args) {\r\n                _this.imageBtWeCat.on(Laya.Event.CLICK, _this, _this.weCatViewOper);\r\n                _this.imageBtWeCat.skin = \"resource/assets/img/common/game_button_2.png\";\r\n            }));\r\n        }\r\n        else {\r\n            Laya.Tween.to(this.boxWeCatMoreGame, { x: 0 }, 1000, null, Laya.Handler.create(this, function (args) {\r\n                _this.imageBtWeCat.on(Laya.Event.CLICK, _this, _this.weCatViewOper);\r\n                _this.imageBtWeCat.skin = \"resource/assets/img/common/game_button_3.png\";\r\n            }));\r\n        }\r\n    };\r\n    WeCatMoreGameView.prototype.viewAniIn = function () {\r\n        var _this = this;\r\n        this.boxWeCatMoreGame.x = -713;\r\n        WeCatMoreGameView.isOpen = true;\r\n        Laya.Tween.to(this.boxWeCatMoreGame, { x: 0 }, 500, null, Laya.Handler.create(this, function (args) {\r\n            _this.addEvent();\r\n            _this.imageBtWeCat.skin = \"resource/assets/img/common/game_button_3.png\";\r\n        }));\r\n    };\r\n    WeCatMoreGameView.prototype.viewAniOut = function () {\r\n        var _this = this;\r\n        this.boxWeCatMoreGame.x = 0;\r\n        Laya.Tween.to(this.boxWeCatMoreGame, { x: -713 }, 500, null, Laya.Handler.create(this, function (args) {\r\n            _this.imageBtWeCat.skin = \"resource/assets/img/common/game_button_2.png\";\r\n            WeCatMoreGameView.nEnterCount += 1;\r\n            if (WeCatMoreGameView.nEnterCount >= 2) {\r\n                if (PlayerDataManager.bGlobEnterGame) {\r\n                    ViewChangeManager.getInstance().CommonView.visible = true;\r\n                    ;\r\n                }\r\n                PlayerDataManager.bGlobEnterGame = false;\r\n            }\r\n            if (PlayerDataManager.bGlobEnterGame) {\r\n                MiniManeger.instance.playViderAd({\r\n                    successFun: function () {\r\n                        ViewManager.getInstance().showView(SuccessfulEntryOneView);\r\n                        _this.removeSelf();\r\n                        WeCatMoreGameView.isOpen = false;\r\n                    },\r\n                    failFun: function () {\r\n                        ViewManager.getInstance().showView(SuccessfulEntryOneView);\r\n                        _this.removeSelf();\r\n                        WeCatMoreGameView.isOpen = false;\r\n                    },\r\n                    errorFun: function () {\r\n                        ViewManager.getInstance().showView(SuccessfulEntryOneView);\r\n                        _this.removeSelf();\r\n                        WeCatMoreGameView.isOpen = false;\r\n                    }\r\n                });\r\n            }\r\n            else {\r\n                _this.removeSelf();\r\n                WeCatMoreGameView.isOpen = false;\r\n            }\r\n        }));\r\n    };\r\n    WeCatMoreGameView.isOpen = false;\r\n    WeCatMoreGameView.nEnterCount = 0;\r\n    return WeCatMoreGameView;\r\n}(BaseSceneUISkinPopView));\r\nexport default WeCatMoreGameView;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/wecat/WeCatMoreGameItemTwo.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/PlatformDY.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ViewChangeManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameData.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameDataManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ViewChangeManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/SuccessfulEntryOneView.ts"
  ]
}
