{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { GameManager } from \"./GameManager\";\r\nimport { LevelScene1 } from \"../views/game/level/LevelScene1\";\r\nimport { LevelScene2 } from \"../views/game/level/LevelScene2\";\r\nimport { LevelScene3 } from \"../views/game/level/LevelScene3\";\r\nimport { LevelScene4 } from \"../views/game/level/LevelScene4\";\r\nimport { LevelScene5 } from \"../views/game/level/LevelScene5\";\r\nimport { LevelScene6 } from \"../views/game/level/LevelScene6\";\r\nimport LevelScene7 from \"../views/game/level/LevelScene7\";\r\nimport LevelScene8 from \"../views/game/level/LevelScene8\";\r\nimport LevelScene9 from \"../views/game/level/LevelScene9\";\r\nimport LevelScene10 from \"../views/game/level/LevelScene10\";\r\nimport LevelScene11 from \"../views/game/level/LevelScene11\";\r\nimport LevelScene12 from \"../views/game/level/LevelScene12\";\r\nimport { PlayerDataManager } from \"../common/GameDataManager\";\r\nimport ViewChangeManager from \"../games/ViewChangeManager\";\r\nimport { MiniManeger } from \"../minigame/MiniManeger\";\r\nimport LevelScene14 from \"../views/game/level/LevelScene14\";\r\nimport LevelScene13 from \"../views/game/level/LevelScene13\";\r\nimport LevelScene16 from \"../views/game/level/LevelScene16\";\r\nimport LevelScene15 from \"../views/game/level/LevelScene15\";\r\nimport LevelScene17 from \"../views/game/level/LevelScene17\";\r\nimport LevelScene18 from \"../views/game/level/LevelScene18\";\r\nimport LevelScene19 from \"../views/game/level/LevelScene19\";\r\nimport LevelScene21 from \"../views/game/level/LevelScene21\";\r\nimport LevelScene20 from \"../views/game/level/LevelScene20\";\r\nimport LevelScene22 from \"../views/game/level/LevelScene22\";\r\nimport LevelScene23 from \"../views/game/level/LevelScene23\";\r\nimport LevelScene24 from \"../views/game/level/LevelScene24\";\r\nimport LevelScene25 from \"../views/game/level/LevelScene25\";\r\nimport LevelScene29 from \"../views/game/level/LevelScene29\";\r\nimport LevelScene28 from \"../views/game/level/LevelScene28\";\r\nimport LevelScene27 from \"../views/game/level/LevelScene27\";\r\nimport LevelScene26 from \"../views/game/level/LevelScene26\";\r\nimport LevelScene30 from \"../views/game/level/LevelScene30\";\r\nvar LevelManager = (function () {\r\n    function LevelManager() {\r\n        this.levelBaseUrl = 'resource/assets/configs/map/map';\r\n        this.nCurLevel = 0;\r\n    }\r\n    LevelManager.getInstance = function () {\r\n        if (!this.ins)\r\n            this.ins = new LevelManager();\r\n        return this.ins;\r\n    };\r\n    LevelManager.prototype.createLevelScene = function (level) {\r\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\r\n            var nLevel, classKey, data, stGroup, self;\r\n            var _this = this;\r\n            return tslib_1.__generator(this, function (_a) {\r\n                switch (_a.label) {\r\n                    case 0:\r\n                        nLevel = level;\r\n                        if (DeviceUtil.isTTMiniGame() && BaseConst.infos.gameInfo.openPsAward == 0) {\r\n                            nLevel = nLevel + 1;\r\n                        }\r\n                        GameManager.instance.curLevel = level;\r\n                        switch (nLevel) {\r\n                            case 1:\r\n                                classKey = LevelScene1;\r\n                                break;\r\n                            case 2:\r\n                                classKey = LevelScene2;\r\n                                break;\r\n                            case 3:\r\n                                classKey = LevelScene3;\r\n                                break;\r\n                            case 4:\r\n                                classKey = LevelScene4;\r\n                                break;\r\n                            case 5:\r\n                                classKey = LevelScene5;\r\n                                break;\r\n                            case 6:\r\n                                classKey = LevelScene6;\r\n                                break;\r\n                            case 7:\r\n                                classKey = LevelScene7;\r\n                                break;\r\n                            case 8:\r\n                                classKey = LevelScene8;\r\n                                break;\r\n                            case 9:\r\n                                classKey = LevelScene9;\r\n                                break;\r\n                            case 10:\r\n                                classKey = LevelScene10;\r\n                                break;\r\n                            case 11:\r\n                                classKey = LevelScene11;\r\n                                break;\r\n                            case 12:\r\n                                classKey = LevelScene12;\r\n                                break;\r\n                            case 13:\r\n                                classKey = LevelScene13;\r\n                                break;\r\n                            case 14:\r\n                                classKey = LevelScene14;\r\n                                break;\r\n                            case 15:\r\n                                classKey = LevelScene15;\r\n                                break;\r\n                            case 16:\r\n                                classKey = LevelScene16;\r\n                                break;\r\n                            case 17:\r\n                                classKey = LevelScene17;\r\n                                break;\r\n                            case 18:\r\n                                classKey = LevelScene18;\r\n                                break;\r\n                            case 19:\r\n                                classKey = LevelScene19;\r\n                                break;\r\n                            case 20:\r\n                                classKey = LevelScene20;\r\n                                break;\r\n                            case 21:\r\n                                classKey = LevelScene21;\r\n                                break;\r\n                            case 22:\r\n                                classKey = LevelScene22;\r\n                                break;\r\n                            case 23:\r\n                                classKey = LevelScene23;\r\n                                break;\r\n                            case 24:\r\n                                classKey = LevelScene24;\r\n                                break;\r\n                            case 25:\r\n                                classKey = LevelScene25;\r\n                                break;\r\n                            case 26:\r\n                                classKey = LevelScene26;\r\n                                break;\r\n                            case 27:\r\n                                classKey = LevelScene27;\r\n                                break;\r\n                            case 28:\r\n                                classKey = LevelScene28;\r\n                                break;\r\n                            case 29:\r\n                                classKey = LevelScene29;\r\n                                break;\r\n                            case 30:\r\n                                classKey = LevelScene30;\r\n                                break;\r\n                            default:\r\n                                classKey = LevelScene1;\r\n                                break;\r\n                        }\r\n                        if (DeviceUtil.isTTMiniGame() && BaseConst.infos.gameInfo.openPsAward == 0) {\r\n                            PlayerDataManager.getInstance().setCurLevel(nLevel - 2);\r\n                        }\r\n                        else {\r\n                            PlayerDataManager.getInstance().setCurLevel(nLevel - 1);\r\n                        }\r\n                        if (DeviceUtil.isTTMiniGame()) {\r\n                            MiniManeger.instance.hideBanner();\r\n                        }\r\n                        return [4, GameManager.instance.loadCongigs(this.levelBaseUrl + nLevel + '.json')];\r\n                    case 1:\r\n                        data = _a.sent();\r\n                        stGroup = [];\r\n                        stGroup.push(nLevel.toString());\r\n                        ViewChangeManager.getInstance().showBufferLoadingView();\r\n                        self = this;\r\n                        ResUtil.getIntance().loadGroups(stGroup, function () {\r\n                            if (self.currentGameScence && nLevel < PlayerDataManager.getInstance().nMaxLevelCount) {\r\n                                self.currentGameScence.destroyAni();\r\n                                if (nLevel > 2) {\r\n                                    self.currentGameScence.destroy();\r\n                                    var lastLevel = nLevel - 1;\r\n                                    ResUtil.getIntance().destoryGroup(\"\" + lastLevel);\r\n                                    Laya.Resource.destroyUnusedResources();\r\n                                }\r\n                                self.currentGameScence = null;\r\n                            }\r\n                            if (self.currentGameScence) {\r\n                                self.currentGameScence.removeSelf();\r\n                                self.currentGameScence.destroyAni();\r\n                                self.currentGameScence.destroy();\r\n                                self.currentGameScence = null;\r\n                            }\r\n                            ViewChangeManager.getInstance().hideBufferLoadingView();\r\n                            self.currentGameScence = new classKey(data);\r\n                            self.currentGameScence.viewData_ = data;\r\n                            self.currentGameScence.mapData = data;\r\n                            _this.nCurLevel = nLevel;\r\n                            SceneManager.getInstance().openSceneInstance(self.currentGameScence);\r\n                        }, function () { });\r\n                        Laya.timer.once(2000, this, function () {\r\n                            if (nLevel < PlayerDataManager.getInstance().getLevelNumMakeOver()) {\r\n                                stGroup = [];\r\n                                stGroup.push((nLevel + 1).toString());\r\n                                ResUtil.getIntance().loadGroups(stGroup);\r\n                            }\r\n                        });\r\n                        return [2];\r\n                }\r\n            });\r\n        });\r\n    };\r\n    return LevelManager;\r\n}());\r\nexport { LevelManager };\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/manager/GameManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene1.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene2.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene3.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene4.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene5.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene6.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene7.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene8.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene9.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene10.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene11.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene12.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameDataManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ViewChangeManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelBase.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameData.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene14.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene13.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene16.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene15.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene17.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene18.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene19.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene21.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene20.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene22.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene23.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene24.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene25.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene29.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene28.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene27.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene26.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/level/LevelScene30.ts"
  ]
}
