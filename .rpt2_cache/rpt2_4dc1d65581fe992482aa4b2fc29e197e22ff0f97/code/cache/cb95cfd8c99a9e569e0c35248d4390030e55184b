{
  "code": "import * as tslib_1 from \"tslib\";\r\nimport { PlayerDataManager } from \"../../common/GameDataManager\";\r\nimport { GoodsType } from \"../../games/CommonDefine\";\r\nimport ViewChangeManager from \"../../games/ViewChangeManager\";\r\nimport ConfigManager from \"../../games/ConfigManager\";\r\nimport SoundManager from \"../../common/SoundManager\";\r\nimport AddPsView from \"./AddPsView\";\r\nvar LevelViewItem = (function (_super) {\r\n    tslib_1.__extends(LevelViewItem, _super);\r\n    function LevelViewItem(data_) {\r\n        var _this = _super.call(this) || this;\r\n        _this.className_key = \"LevelViewItem\";\r\n        _this.nCurLeve = data_;\r\n        _this.skin = \"game/uiView/LevelIndexView.json\";\r\n        _this.width = 318;\r\n        _this.height = 329;\r\n        _this.pivotX = 318 / 2;\r\n        _this.pivotY = 329 / 2;\r\n        return _this;\r\n    }\r\n    LevelViewItem.prototype.onEnable = function () {\r\n        this.on(Laya.Event.CLICK, this, this.enterLevel);\r\n    };\r\n    LevelViewItem.prototype.onDisable = function () {\r\n        this.off(Laya.Event.CLICK, this, this.enterLevel);\r\n        Laya.Tween.clearAll(this);\r\n        Laya.timer.clearAll(this.openLevelItemAni);\r\n    };\r\n    LevelViewItem.prototype.createChildren = function () {\r\n        _super.prototype.createChildren.call(this);\r\n    };\r\n    LevelViewItem.prototype.childrenCreated = function () {\r\n        this.refreshView();\r\n    };\r\n    LevelViewItem.prototype.refreshView = function () {\r\n        this.spG.visible = false;\r\n        this.bAni = false;\r\n        BitmapLabelUtils.setLabel(this.levelNum, this.nCurLeve.toString(), \"resource/assets/img/common/level_number12/level_number1_\", 0, \".png\", \"center\");\r\n        if (this.nCurLeve <= PlayerDataManager.getInstance().getCurLevelMax()) {\r\n            this.spG.visible = true;\r\n            this.spBg.loadImage(\"resource/assets/img/ui/levelview/level_baseboard_1.png\");\r\n        }\r\n        else if (this.nCurLeve == PlayerDataManager.getInstance().getLevelToChangeMaxLevelForLevelView()) {\r\n            this.spBg.loadImage(\"resource/assets/img/ui/levelview/level_baseboard_2.png\");\r\n            this.bAni = true;\r\n        }\r\n        else {\r\n            this.spBg.loadImage(\"resource/assets/img/ui/levelview/level_baseboard_3.png\");\r\n        }\r\n        this.openLevelItemAni();\r\n    };\r\n    LevelViewItem.prototype.setData = function (data_) {\r\n        this.nCurLeve = data_;\r\n        this.refreshView();\r\n    };\r\n    LevelViewItem.prototype.enterLevel = function () {\r\n        SoundManager.getInstance().playEffect(\"button\", 1);\r\n        if (this.nCurLeve > PlayerDataManager.getInstance().getLevelToChangeMaxLevelForLevelView()) {\r\n            TipsManager.getInstance().showDefaultTips(\"未解锁\");\r\n            return;\r\n        }\r\n        var nSpCost = 1;\r\n        var stGameConfig = ConfigManager.getInstance().getGameConfigDataByID(8);\r\n        if (stGameConfig) {\r\n            nSpCost = parseInt(stGameConfig.strValue);\r\n        }\r\n        var b = PlayerDataManager.getInstance().CheckGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        if (!b) {\r\n            TipsManager.getInstance().showDefaultTips(\"体力不足\");\r\n            ViewChangeManager.getInstance().showBufferLoadingView();\r\n            ResUtil.getIntance().loadGroups([\"adsp\"], function () {\r\n                ViewManager.getInstance().showView(AddPsView);\r\n                ViewChangeManager.getInstance().hideBufferLoadingView();\r\n            });\r\n            return;\r\n        }\r\n        PlayerDataManager.getInstance().subGoods(GoodsType.enum_GoodsType_Sp, nSpCost);\r\n        ViewChangeManager.getInstance().gotoLevel(this.nCurLeve);\r\n        this.pParentView.closeViewWhenGoToLevel();\r\n    };\r\n    LevelViewItem.prototype.setParentView = function (pParentView) {\r\n        this.pParentView = pParentView;\r\n    };\r\n    LevelViewItem.prototype.openLevelItemAni = function () {\r\n        var _this = this;\r\n        if (this.nCurLeve == PlayerDataManager.getInstance().getLevelToChangeMaxLevel() && this.bAni) {\r\n            Laya.Tween.clearAll(this);\r\n            Laya.Tween.to(this, { scaleX: 1.1, scaleY: 1.1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(this, function (args) {\r\n                Laya.Tween.to(_this, { scaleX: 1, scaleY: 1 }, 300, Laya.Ease.sineOut, Laya.Handler.create(_this, function (args) {\r\n                    Laya.timer.once(0, _this, _this.openLevelItemAni);\r\n                }));\r\n            }));\r\n        }\r\n        else {\r\n            Laya.Tween.clearAll(this);\r\n            Laya.timer.clearAll(this.openLevelItemAni);\r\n        }\r\n    };\r\n    return LevelViewItem;\r\n}(BaseSceneUISkin));\r\nexport default LevelViewItem;\r\n",
  "references": [
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/GameDataManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/GameStateManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/CommonDefine.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/manager/LevelManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/LevelView.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ViewChangeManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/games/ConfigManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/common/SoundManager.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/minigame/MiniManeger.ts",
    "F:/gitpro/ecy_game_framework/game_framework_ecy/game_framework_ecy/src/script/views/game/AddPsView.ts"
  ]
}
